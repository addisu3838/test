<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="format-detection" content="telephone=no">
    <title>Project</title>
    <style>
        /* === RESET & VARIABLES === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        :root {
            --primary: #1e2b37;
            --primary-light: #2c3e50;
            --accent: #27ae60;
            --danger: #e74c3c;
            --info: #3498db;
            --warning: #f39c12;
            --bg: #f0f5f8;
            --card-bg: #ffffff;
            --text-dark: #1e2b37;
            --text-soft: #2c3e50;
            --border-light: #e9edf2;
            --income: #27ae60;
            --cost: #e74c3c;
            --profit: #2980b9;
            --header-gradient: linear-gradient(145deg, #1a2632, #2c3e50);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
        }

        body {
            background: var(--bg);
            color: var(--text-dark);
            min-height: 100vh;
            display: flex;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }

        .app-wrapper {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            border-radius: 0;
        }

        .content-container {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-overflow-scrolling: touch;
            padding: 2px 0 80px 0;
            background: white;
        }

        /* === FLOATING BOTTOM TABS (only 3) === */
        .floating-footer {
            position: fixed;
            bottom: 20px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            pointer-events: none;
            z-index: 1000;
            padding: 0 8px;
        }

        .floating-tabs {            
            padding: 5px 5px;
            border-radius: 59px;
            display: flex;
            gap: 6px;
            box-shadow: 0 4px 20px rgba(159, 241, 6, 0.3);
            pointer-events: auto;
            border: 1px solid rgba(184, 248, 66, 0.2);
            backdrop-filter: blur(10px); 
            background-color: white;
                      
        }

        .nav-btn {
            background: rgba(147, 243, 103, 0.15);
            border: 1px solid rgba(25, 231, 94, 0.3);
            color: #000000;
            padding: 9px 14px;
            border-radius: 150px;
            font-size: 14px;
            font-weight: 600;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 2px;
            transition: all 0.2s ease;
            cursor: pointer;
            min-width: 60px;
            justify-content: center;
        }

        .nav-btn span {
            font-size: 10px;
        }

        .nav-btn.active {
            background: #0077ff;
            border-color: rgb(17, 1, 1);
            color: rgb(3, 0, 0);
            box-shadow: 0 2px 12px #eef1f380;
            transform: scale(1.05);
        }

        .nav-btn:active {
            transform: scale(0.95);
        }

        /* === INCOME TABLE (ORIGINAL - UNTOUCHED) === */
        .table-container {
            padding: 8px 6px;
        }

        .mobile-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 18px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
            font-size: 13px;
        }

        .mobile-table thead tr {
            background: var(--header-gradient);
        }

        .mobile-table th {
            color: white;
            font-weight: 600;
            font-size: 12px;
            padding: 16px 6px;
            text-align: left;
            letter-spacing: 0.3px;
            white-space: nowrap;
            background: #1e2b37;
        }

        .mobile-table td {
            padding: 12px 6px;
            border-bottom: 1px solid var(--border-light);
            vertical-align: middle;
            background: white;
        }

        .mobile-table tr:last-child td {
            border-bottom: none;
        }

        .item-no {
            font-weight: 700;
            color: var(--primary-light);
            font-size: 11px;
            background: #f0f4fa;
            display: inline-block;
            padding: 3px 8px;
            border-radius: 30px;
            white-space: nowrap;
        }

        .work-description {
            font-size: 13px;
            line-height: 1.45;
            color: #1e2b37;
            max-width: 400px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: auto;
            
            
        }

        .achievement-cell {
            font-weight: 500;
            color: #4a5a6a;
            text-align: right;
            font-size: 12px;
            white-space: nowrap;
        }

        .income-value {
            color: var(--income);
            font-weight: 700;
            font-size: 12px;
            text-align: right;
            white-space: nowrap;
        }

        /* === SOS DASHBOARD (KEPT AS IS) === */
        .sos-dashboard {
            padding: 11px;
            background: #f8fafc;
        }

        .sos-header {
            /*background: linear-gradient(145deg, #c0392b, #e74c3c);*/
            color: black;
            padding: 14px 10px;
            border-radius: 18px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-md);
        }

        .sos-header h2 {
            font-size: 14px;
            font-weight: 400;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .sos-table-container {
            background: white;
            border-radius: 14px;
            padding: 20px;
            box-shadow: var(--shadow-sm);
            margin-top: 12px;
        }

        .sos-data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .sos-data-table th {
            background: #b6dd96;
            color: rgb(0, 0, 0);
            padding: 3px 4px;
            text-align: left;
            font-weight: 200;
            font-size: 14px;
            font-weight: bold;
            
        }

        .sos-data-table td {
            padding: 9px 9px;
            border-bottom: 1px solid #f0f0f0;
            font-weight: 800;
            font-style: italic;

        }

        .sos-data-table tr:last-child td {
            border-bottom: none;
        }

        .text-success {
            color: #27ae60;
            font-weight: 600;
        }

        .text-danger {
            color: #e74c3c;
            font-weight: 600;
        }

        /* === COMPARISON DASHBOARD (SIMPLIFIED - ONLY TABLE) === */
        .comparison-dashboard {
            padding: 16px;
            background: #f0f7ff;
        }

        .comparison-header {
            background: linear-gradient(145deg, #2980b9, #3498db);
            color: white;
            padding: 24px 20px;
            border-radius: 28px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
        }

        .comparison-header h2 {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .cost-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .cost-table th {
            background: #2980b9;
            color: white;
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
        }

        .cost-table td {
            padding: 14px 12px;
            border-bottom: 1px solid #f0f0f0;
            font-weight: 500;
        }

        .cost-table tr:last-child td {
            border-bottom: none;
        }

        .cost-table .total-row {
            background: #2c3e50;
            color: white;
            font-weight: 700;
        }

        .cost-table .total-row td {
            background: #2c3e50;
            color: white;
        }

        .text-success {
            color: #27ae60;
            font-weight: 600;
        }

        .text-danger {
            color: #e74c3c;
            font-weight: 600;
        }

        .fade-in {
            animation: fadeIn 0.25s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0.4; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 480px) {
            .nav-btn {
                padding: 10px 16px;
                font-size: 14px;
                min-width: 80px;
            }
            .floating-tabs {
                gap: 6px;
                padding: 8px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="app-wrapper">
        <div class="content-container" id="contentContainer"></div>

        <!-- Floating Bottom Tabs (only 3) -->
        <div class="floating-footer">
            <div class="floating-tabs">
                <button class="nav-btn active" data-tab="monthly">
                    <span>üìÖ</span> Income
                </button>
                </button>
                <button class="nav-btn" data-tab="comparison">
                    <span>üìä</span> Cost
                <button class="nav-btn" data-tab="sos">
                    <span>‚ö†Ô∏è</span> SOS
                </button>
            </div>
        </div>
    </div>

    <script>
        (function() {
            // ---------- COMPLETE PROJECT DATA (INCOME TAB - UNTOUCHED) ----------
            const projectData = [
                { itemNo: "1.12.8", description: "Allow for supplying temporary electricity, water, telephone and other utility bills for the supervisor's and contractor's including connection, distribution system for the work, internal arrangements and all payment to the authorities for connections. it is the responsibility of the contractor to ensure steady and uninterrupted power supply to work", achievement: 0.72, total: "9141575.07295305", cost: "100000" },
                { itemNo: "1.13.3", description: "Provisions of security", achievement: 0.72, total: "1425815.46702017", cost: "280000" },
                { itemNo: "1.12", description: "Allow for expenses required for conducting compensation payment estimation such as periderm for Committee, fuel cost, printing expenses and other related expenses. Payment shall be paid up on approval of the Engineer keeping all legal procedures. The costs will be reimbursed to the contractor after receiving the original invoice in the payment certificate by the Consultant", achievement: 0.12, total: "425000", cost: "350000" },
                { itemNo: "3.A.1", description: "Mobilization and Demoblization", achievement: 0.5, total: "292789.65", cost: "168000" },
                { itemNo: "2.3.1", description: "Fill and compaction the Core zone with clay material with max hauling distance of 5 Km", achievement: 29479.5, total: "8533136.07", cost: "121000" },
                { itemNo: "2.4.1", description: "Fill and compaction the Shell zone with selected material, max hauling distance of 5 Km", achievement: 43277.3, total: "11292778.662", cost: "72000" },
                { itemNo: "2.5.1", description: "Filter material (Finer) supply and fill(zone 2A)", achievement: 6643.13, total: "8189650.664", cost: "96000" },
                { itemNo: "2.5.2", description: "Filter material (coarser) supply and fill(zone 2B)", achievement: 3020, total: "3729851", cost: "36000" },
                { itemNo: "2.5.4", description: "Riprap(zone 5)", achievement: 2329.54, total: "1890631.3686", cost: "14400" },
                { itemNo: "2.6.1", description: "Fill and compaction zone 4 with Rock material", achievement: 48677.76, total: "41367334.0032", cost: "3600" },
                { itemNo: "", description: "production of rock", achievement: 53248, total: "", cost: "" },
                { itemNo: "2.9.4", description: "Vibrating Wire Piezometer with its complete accessories in embankment", achievement: 3, total: "561600", cost: "3600" },
                { itemNo: "2.9.5", description: "Vibrating Wire settlement sensor with complete accessories", achievement: 2, total: "41367334.0032", cost: "3600" },
                { itemNo: "2.9.8", description: "Vibrating wire cable", achievement: 307.94, total: "288231.84", cost: "3600" },
                { itemNo: "4.2.4", description: "Base slab", achievement: 3.17, total: "16324.64064", cost: "3600" },
                { itemNo: "8.5.1", description: "C-25 concrete work including formwork", achievement: 8.5, total: "45602.5", cost: "3600" },
                { itemNo: "8.5.3", description: "Reinforcement bars (bending, cutting & placing)", achievement: 48677.76, total: "19046.358", cost: "3600" },
                { itemNo: "11.7.1", description: "Ordinary soil excavation", achievement: 156.6, total: "12935.16", cost: "3600" },
                { itemNo: "11.7.2", description: "Basaltic or equivalent stone masonry work in cement sand mortar of 1:3 mix ratio", achievement: 404.811, total: "932097.56805", cost: "3600" },
                { itemNo: "11.7.3", description: "C-25 concrete mixing, placing, vibrating and curing for slab including formwork", achievement: 32.8, total: "194254.72", cost: "3600" },
                { itemNo: "11.7.4", description: "Reinforcement bars of √∏10mm as specified on the drawings with 150mm spacing", achievement: 156.6, total: "103830.33", cost: "3600" },
                { itemNo: "New", description: "Reinforcement bar of Dia 12mm as specified on the drawing with 200mm spacing", achievement: 3663.2, total: "250343.088", cost: "3600" },
                { itemNo: "11.7.6", description: "Cart away excavated material", achievement: 96, total: "4304.64", cost: "3600" },
                { itemNo: "11.7.8", description: "Back fill with shell material around the ditch", achievement: 480, total: "4304.64", cost: "3600" }
            ];

            // ---------- SOS DATA (KEPT AS IS) ----------
            const sosData = [
                {
                    period: "July-1-Jan-25",                    
                    executed: 93976269.21,
                    cost: 217455564.53
                },
                {
                    period: "July-1-Jan-25",                   
                    executed: 343381632.721,
                    cost: 217455564.535
                }
            ];

            // ---------- COMPARISON DATA (COST DATA - ONLY FOR TABLE) ----------
            const comparisonCostData = {
                labour: {
                    required: 2892620.98,
                    used: 2924176.31
                },
                admin: 8499476.64,
                staff: 7593612.57,
                material: {
                    required: 52668615.30,
                    used: 50677145.73
                },
                machinery: {
                    required: 78138494.08,
                    used: 82049518.29
                },
                overhead: 21323070.23,
                totalRequired: 149535837.67,
                totalUsed: 173066999.76
            };

            // ---------- Helper Functions ----------
            function formatCurrency(val) {
                if (val === '' || val === undefined || val === null) return "‚Äî";
                let num = parseFloat(val);
                if (isNaN(num)) return val.toString();
                return num.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            }

            function formatAchievement(val) {
                if (val === '' || val === undefined) return "‚Äî";
                let n = parseFloat(val);
                if (isNaN(n)) return val.toString();
                if (n % 1 === 0) return n.toString();
                return n.toFixed(2);
            }

            // ---------- INCOME TAB (ORIGINAL - UNTOUCHED) ----------
            function loadMonthlyTable() {
                const container = document.getElementById('contentContainer');
                container.innerHTML = `
                    <div class="table-container fade-in">
                        <table class="mobile-table" id="workTable">
                            <thead>
                                <tr>
                                    <th>Item No.</th>
                                    <th>Work Description</th>
                                    <th>Achievement</th>
                                    <th>Income (Birr)</th>
                                </tr>
                            </thead>
                            <tbody id="table-body">
                                ${projectData.map(item => {
                                    const incomeNum = parseFloat(String(item.total).replace(/,/g, '')) || 0;
                                    return `
                                        <tr>
                                            <td><span class="item-no">${item.itemNo || '‚Äî'}</span></td>
                                            <td><div class="work-description" title="${item.description.replace(/"/g, '&quot;')}">${item.description}</div></td>
                                            <td><div class="achievement-cell">${formatAchievement(item.achievement)}</div></td>
                                            <td><div class="income-value">${formatCurrency(incomeNum)}</div></td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }

            // ---------- SOS TAB (KEPT AS IS) ----------
            function loadSosTab() {
                const container = document.getElementById('contentContainer');
                
                container.innerHTML = `
                    <div class="sos-dashboard fade-in">
                        <div class="sos-header">
                            <h2><span>‚ö†Ô∏è</span> SOS Report</h2>
                            <p>dsndsjkds dsjdfsfdsj dfsbudsf Emergency Cost Overview</p>
                            <p> Total Plan Birr =123,569,87456</p>
                        </div>                        
                        <div class="sos-table-container">
                            <table class="sos-data-table">
                                <thead>
                                    <tr>
                                        <th>Period</th>                                        
                                        <th>Executed (Birr)</th>
                                        <th>Cost (Birr)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${sosData.map(item => `
                                        <tr>
                                            <td><strong>${item.period}</strong></td>                                           
                                            <td class="text-success">${formatCurrency(item.executed)}</td>
                                            <td class="text-danger">${formatCurrency(item.cost)}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `;
            }

            // ---------- COMPARISON TAB (SIMPLIFIED - ONLY TABLE, NO CARDS, NO VARIANCE, NO %) ----------
            function loadComparisonTab() {
                const container = document.getElementById('contentContainer');
                const d = comparisonCostData;

                container.innerHTML = `
                    <div class="comparison-dashboard fade-in">
                        <div class="comparison-header">
                            <h2><span>üìä</span> Cost Comparison</h2>
                            <p>Required vs Used ‚Ä¢ Project Resources</p>
                        </div>

                        <!-- ONLY TABLE - NO CARDS, NO VARIANCE COLUMN, NO % COLUMN -->
                        <table class="cost-table">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Required (Birr)</th>
                                    <th>Used (Birr)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>üë∑ Labour</strong></td>
                                    <td>${formatCurrency(d.labour.required)}</td>
                                    <td class="text-danger">${formatCurrency(d.labour.used)}</td>
                                </tr>
                                <tr>
                                    <td><strong>üèõÔ∏è Admin</strong></td>
                                    <td>‚Äî</td>
                                    <td>${formatCurrency(d.admin)}</td>
                                </tr>
                                <tr>
                                    <td><strong>üë• Staff</strong></td>
                                    <td>${formatCurrency(d.staff)}</td>
                                    <td>${formatCurrency(d.staff)}</td>
                                </tr>
                                <tr>
                                    <td><strong>üß± Material</strong></td>
                                    <td>${formatCurrency(d.material.required)}</td>
                                    <td class="text-success">${formatCurrency(d.material.used)}</td>
                                </tr>
                                <tr>
                                    <td><strong>üöú Machinery</strong></td>
                                    <td>${formatCurrency(d.machinery.required)}</td>
                                    <td class="text-danger">${formatCurrency(d.machinery.used)}</td>
                                </tr>
                                <tr>
                                    <td><strong>üìä Overhead (20%)</strong></td>
                                    <td>‚Äî</td>
                                    <td>${formatCurrency(d.overhead)}</td>
                                </tr>
                                <tr class="total-row">
                                    <td><strong>TOTAL</strong></td>
                                    <td>${formatCurrency(d.totalRequired)}</td>
                                    <td>${formatCurrency(d.totalUsed)}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                `;
            }

            // ---------- Tab Switching ----------
            function switchTab(tab) {
                document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
                document.querySelector(`.nav-btn[data-tab="${tab}"]`).classList.add('active');

                if (tab === 'monthly') loadMonthlyTable();
                else if (tab === 'sos') loadSosTab();
                else if (tab === 'comparison') loadComparisonTab();
            }

            // Event listeners
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    switchTab(e.currentTarget.dataset.tab);
                });
            });

            // Initialize with Monthly tab active
            document.addEventListener('DOMContentLoaded', () => {
                loadMonthlyTable();
            });
        })();
    </script>
</body>
</html>